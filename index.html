<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ontester Uganda Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, rgba(243, 244, 246, 0.9) 0%, rgba(229, 231, 235, 0.9) 100%), 
                        url('https://imgs.search.brave.com/d3BvNlj43Wj8FGWUP7cm9Yz-fWCQRqeIQf2QYFmzMMA/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9jZG4u/cGl4YWJheS5jb20v/cGhvdG8vMjAyMi8w/Mi8wMi8xMi8zNS9n/cmV5LWNyb3duZWQt/Y3JhbmUtNjk4ODM1/M182NDAuanBn');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .animate-fade-in {
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        .animate-slide-in {
            animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        .card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            border-color: #f59e0b;
        }
        
        .card-highlight {
            border: 2px solid #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .header-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #7c3aed 100%);
            position: relative;
            overflow: hidden;
        }
        
        .header-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="white" opacity="0.1"/><circle cx="80" cy="40" r="1" fill="white" opacity="0.2"/><circle cx="40" cy="80" r="1.5" fill="white" opacity="0.15"/></svg>');
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #ea580c 100%);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #d97706 0%, #ea580c 50%, #dc2626 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.6);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }
        
        .search-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .search-input {
            background: transparent;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #f59e0b;
            box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
            outline: none;
        }
        
        .suggestions-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .suggestion-item {
            transition: all 0.2s ease;
            border-radius: 8px;
            margin: 4px;
        }
        
        .suggestion-item:hover {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            transform: translateX(4px);
        }
        
        .service-logo {
            transition: transform 0.3s ease;
        }
        
        .card:hover .service-logo {
            transform: scale(1.1) rotate(5deg);
        }
        
        .modal-backdrop {
            backdrop-filter: blur(15px);
            background: rgba(0, 0, 0, 0.6);
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            transform: scale(0.9) translateY(20px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal-content.active {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
        
        .notification {
            backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .back-to-top {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .back-to-top:hover {
            transform: scale(1.15) translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.6);
        }
        
        .section-transition {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section-hidden {
            opacity: 0;
            transform: translateY(20px);
            visibility: hidden;
        }
        
        .section-visible {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        
        @media (max-width: 768px) {
            .card:hover {
                transform: translateY(-6px);
            }
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #f59e0b;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-900">
    <!-- Header -->
    <header class="header-bg text-white py-8 relative">
        <div class="container mx-auto px-4 flex items-center justify-between relative z-10">
            <div class="flex items-center gap-4 animate-slide-in">
                <div class="h-12 w-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center">
                    <span class="text-xl font-bold">O</span>
                </div>
                <h1 class="text-3xl font-bold tracking-tight">Ontester Uganda Directory</h1>
            </div>
            <nav class="hidden md:flex space-x-6 animate-slide-in" style="animation-delay: 0.2s">
                <a href="#services" class="hover:text-orange-300 transition-all duration-300 px-3 py-2 rounded-lg hover:bg-white/10" aria-label="Services">Services</a>
                <a href="#investments" class="hover:text-orange-300 transition-all duration-300 px-3 py-2 rounded-lg hover:bg-white/10" aria-label="Investments">Investments</a>
                <a href="#calculator" class="hover:text-orange-300 transition-all duration-300 px-3 py-2 rounded-lg hover:bg-white/10" aria-label="Tax Calculator">Tax Calculator</a>
                <a href="#contact" class="hover:text-orange-300 transition-all duration-300 px-3 py-2 rounded-lg hover:bg-white/10" aria-label="Contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="bg-gradient-to-r from-indigo-900 to-purple-900 text-white py-4 md:hidden">
        <div class="container mx-auto px-4 flex justify-center flex-wrap gap-2">
            <button onclick="toggleSection('services')" class="btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm" aria-label="View Services">Services</button>
            <button onclick="toggleSection('investments')" class="btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm" aria-label="View Investments">Investments</button>
            <button onclick="toggleSection('calculator')" class="btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm" aria-label="View Tax Calculator">Calculator</button>
            <button onclick="toggleSection('contact')" class="btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm" aria-label="View Contact">Contact</button>
        </div>
    </div>

    <!-- Search Section -->
    <section class="py-16 bg-gradient-to-br from-gray-50 to-gray-100">
        <div class="container mx-auto px-4 animate-fade-in">
            <h2 class="text-4xl font-bold text-center mb-4 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Explore Uganda's Business Ecosystem</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Discover government services, investment opportunities, and business solutions tailored for Uganda's growing economy.</p>
            
            <div class="search-container relative max-w-3xl mx-auto p-6">
                <div class="relative flex">
                    <input type="text" id="searchInput" placeholder="Search services, investments, or locations..." 
                           class="search-input w-full p-4 pr-12 rounded-l-2xl text-gray-700 text-lg" 
                           oninput="debouncedShowSuggestions()" 
                           onkeydown="handleSearchKeydown(event)" 
                           autocomplete="off" 
                           aria-label="Search directory">
                    <button onclick="searchDirectory()" class="btn-primary text-white px-6 py-4 font-semibold text-lg" aria-label="Search">
                        <span id="searchButtonText">Search</span>
                        <div id="searchSpinner" class="loading-spinner hidden mx-auto"></div>
                    </button>
                    <button onclick="clearSearch()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-4 rounded-r-2xl font-semibold text-lg transition-all" aria-label="Clear search">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
                <div id="searchSuggestions" class="suggestions-container absolute top-full left-6 right-6 mt-2 hidden z-50" role="listbox"></div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-4 mt-8">
                <select id="categoryFilter" class="p-3 border-2 border-gray-200 rounded-xl bg-white/80 backdrop-blur-sm focus:border-orange-400 transition-all" onchange="filterListings()" aria-label="Filter by category">
                    <option value="all">All Categories</option>
                    <option value="services">Government Services</option>
                    <option value="investments">Investment Services</option>
                </select>
                <select id="locationFilter" class="p-3 border-2 border-gray-200 rounded-xl bg-white/80 backdrop-blur-sm focus:border-orange-400 transition-all" onchange="filterListings()" aria-label="Filter by location">
                    <option value="all">All Locations</option>
                    <option value="kampala">Kampala</option>
                    <option value="bugolobi">Bugolobi</option>
                    <option value="bweyogerere">Bweyogerere</option>
                    <option value="kololo">Kololo</option>
                    <option value="nakawa">Nakawa</option>
                </select>
                <button onclick="clearFilters()" class="px-6 py-3 border-2 border-gray-300 rounded-xl bg-white/80 hover:bg-gray-50 transition-all">Clear Filters</button>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="container mx-auto px-4 py-16 section-transition section-visible">
        <h2 class="text-4xl font-bold mb-4 text-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Government Services</h2>
        <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">Access comprehensive government services designed to support business growth and ensure regulatory compliance in Uganda.</p>
        
        <div id="servicesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- ICT Policy & Digital Transformation -->
            <div class="card p-6" data-title="ICT Policy & Digital Transformation" data-keywords="ict policy, digital transformation, e-services, infrastructure, kampala, ai integration, cloud-first, cybersecurity, zero-trust" data-location="kampala">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://imgs.search.brave.com/DtKCyzWcV1-kTNCivT6agcm00CotnUG50B4kXcJLsxk/rs:fit:200:200:1:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuc2Vla2xvZ28u/Y29tL2xvZ28tcG5n/LzU0LzEvbmF0aW9u/YWwtaW5mb3JtYXRp/b24tdGVjaG5vbG9n/eS1hdXRob3JpdHkt/bml0YS1sb2dvLXBu/Z19zZWVrbG9nby01/NDg4ODAucG5n" alt="NITA-U Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">ICT Policy & Digital Transformation</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Cloud-first policies and AI integration drive competitive economies. Zero-trust cybersecurity frameworks with quantum-resistant encryption ensure secure digital transformation.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 417 801 038
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('ICT Policy & Digital Transformation', 'info@nita.go.ug', 'Inquiry about ICT Policy Services')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email NITA-U">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.nita.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit NITA-U Website">Website</a>
                    <button onclick="downloadGuide('NITA-U')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download NITA-U Guide">Guide</button>
                </div>
            </div>

            <!-- Telecom & Broadcasting Regulation -->
            <div class="card p-6" data-title="Telecom & Broadcasting Regulation" data-keywords="telecom, broadcasting, regulation, licenses, bugolobi, 5g, 6g, network slicing, satellite internet, streaming" data-location="bugolobi">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://github.com/Ptr234/TEC/raw/main/UCC%20logo.png" alt="UCC Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Telecom & Broadcasting Regulation</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Bugolobi, Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">5G and emerging 6G technologies with network slicing for customized connectivity. AI-driven network optimization reduces costs by 45% while improving coverage.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 414 339 000
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Telecom & Broadcasting Regulation', 'info@ucc.co.ug', 'Inquiry about Telecom Services')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email UCC">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ucc.co.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit UCC Website">Website</a>
                    <button onclick="downloadGuide('UCC')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download UCC Guide">Guide</button>
                </div>
            </div>

            <!-- Additional service cards would follow the same improved pattern -->
            <!-- Public Broadcasting -->
            <div class="card p-6" data-title="Public Broadcasting" data-keywords="public broadcasting, radio, tv, media, kampala, podcasts, on-demand, interactive, community-driven" data-location="kampala">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://ubc.go.ug/wp-content/uploads/2023/10/UBC.png" alt="UBC Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Public Broadcasting</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Multi-platform content strategies with podcast production and on-demand services. AI-powered personalization enhances engagement with interactive technologies.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 414 595 000
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Public Broadcasting', 'communications@ubc.co.ug', 'Inquiry about Broadcasting Services')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email UBC">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ubc.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit UBC Website">Website</a>
                    <button onclick="downloadGuide('UBC')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download UBC Guide">Guide</button>
                </div>
            </div>

            <!-- Continue with other service cards... -->
            <!-- Tax Collection -->
            <div class="card p-6" data-title="Tax Collection" data-keywords="tax collection, corporate tax, vat, customs, kampala, ai fraud detection, blockchain, digital taxation, cryptocurrency" data-location="nakawa">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://github.com/Ptr234/TEC/raw/main/URA%20logo.png" alt="URA Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Tax Collection</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Nakawa, Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Advanced AI and machine learning enable real-time fraud detection. Blockchain ensures transparent transaction records with cryptocurrency tracking capabilities.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 417 442 054
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Tax Collection', 'customercare@ura.go.ug', 'Inquiry about Tax Services')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email URA">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ura.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit URA Website">Website</a>
                    <button onclick="downloadGuide('URA')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download URA Guide">Guide</button>
                </div>
            </div>

            <!-- Business Registration -->
            <div class="card p-6" data-title="Business Registration" data-keywords="business registration, trademark, patent, kololo, blockchain registries, ai name checks, smart contracts, digital identity" data-location="kololo">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://github.com/Ptr234/TEC/raw/main/URSB%20logo.png" alt="URSB Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Business Registration</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kololo, Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Fully digitized registration with AI-powered name availability checks. Blockchain-based corporate registries ensure immutable records with smart contract automation.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 417 338 100
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Business Registration', 'info@ursb.go.ug', 'Business Registration Inquiry')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email URSB">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ursb.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit URSB Website">Website</a>
                    <button onclick="downloadGuide('URSB')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download URSB Guide">Guide</button>
                </div>
            </div>

            <!-- Standards & Quality Assurance -->
            <div class="card p-6" data-title="Standards & Quality Assurance" data-keywords="standards, quality assurance, export compliance, bweyogerere, iot sensors, digital twin, blockchain traceability, sustainability" data-location="bweyogerere">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://imgs.search.brave.com/VaNcV3ncVw7-W-bJhOsEJNO3N4fH8QcIOafwC3CDVC8/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuc2Vla2xvZ28u/Y29tL2xvZ28tcG5n/LzU0LzIvdWdhbmRh/LW5hdGlvbmFsLWJ1/cmVhdS1vZi1zdGFu/ZGFyZHMtdW5icy1s/b2dvLXBuZ19zZWVr/bG9nby01NDk3MjMu/cG5n" alt="UNBS Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Standards & Quality Assurance</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Bweyogerere, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">IoT sensors and AI-powered inspection systems enable continuous real-time monitoring. Digital twin technology allows virtual quality testing, reducing costs by 50%.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 417 333 250
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Standards & Quality Assurance', 'unbs@unbs.go.ug', 'Inquiry about Quality Standards')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email UNBS">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.unbs.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit UNBS Website">Website</a>
                    <button onclick="downloadGuide('UNBS')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download UNBS Guide">Guide</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Investments Section -->
    <section id="investments" class="container mx-auto px-4 py-16 bg-gradient-to-br from-blue-50 to-indigo-50 section-transition section-hidden">
        <h2 class="text-4xl font-bold mb-4 text-center bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">Investment Opportunities</h2>
        <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">Explore lucrative investment opportunities with government support, incentives, and regulatory frameworks designed to foster economic growth.</p>
        
        <div id="investmentsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Investment Facilitation -->
            <div class="card p-6" data-title="Investment Facilitation" data-keywords="investment facilitation, licensing, sme, kololo, esg compliance, green investments, digital platforms, ai market analysis" data-location="kololo">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://github.com/Ptr234/TEC/raw/main/UIA%20logo.png" alt="UIA Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Investment Facilitation</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kololo, Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">ESG compliance and sustainable development goals drive investment facilitation. Digital platforms provide one-stop services with AI-powered market analysis.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 414 301 000
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Investment Facilitation', 'info@ugandainvest.go.ug', 'Investment Inquiry')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email UIA">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ugandainvest.go.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit UIA Website">Website</a>
                    <button onclick="downloadGuide('UIA')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download UIA Guide">Guide</button>
                </div>
            </div>

            <!-- Capital Markets Regulation -->
            <div class="card p-6" data-title="Capital Markets Regulation" data-keywords="capital markets, securities, brokers, kampala" data-location="kampala">
                <div class="flex items-center gap-4 mb-4">
                    <img src="https://cmauganda.co.ug/wp-content/uploads/2024/12/CMA-LOGO-1.png" alt="CMA Logo" class="service-logo w-12 h-12 object-contain rounded-lg">
                    <h3 class="text-xl font-bold text-gray-900">Capital Markets Regulation</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Regulates capital markets, licenses fund managers and brokers, oversees securities issuance with advanced digital platforms and real-time compliance monitoring.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 414 342 788
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Capital Markets Regulation', 'cma@cmauganda.co.ug', 'Capital Markets Inquiry')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email CMA">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.cmauganda.co.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit CMA Website">Website</a>
                    <button onclick="downloadGuide('CMA')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download CMA Guide">Guide</button>
                </div>
            </div>

            <!-- Renewable Energy Finance -->
            <div class="card p-6" data-title="Renewable Energy Finance" data-keywords="renewable energy, finance, guarantees, kampala" data-location="kampala">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-lg flex items-center justify-center service-logo">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900">Renewable Energy Finance</h3>
                </div>
                <p class="text-gray-600 text-sm mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    Kampala, Uganda
                </p>
                <p class="text-gray-600 mb-4 leading-relaxed">Provides liquidity refinance, interest-rate buy-downs, partial risk guarantees for renewable energy projects with focus on solar, wind, and hydroelectric investments.</p>
                <p class="text-gray-600 text-sm mb-4 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    +256 312 165 200
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="openEmailModal('Renewable Energy Finance', 'info@ueccc.co.ug', 'Renewable Energy Financing Inquiry')" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium" aria-label="Email UECCC">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Email
                    </button>
                    <a href="https://www.ueccc.or.ug" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-all text-sm font-medium" aria-label="Visit UECCC Website">Website</a>
                    <button onclick="downloadGuide('UECCC')" class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all text-sm font-medium" aria-label="Download UECCC Guide">Guide</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Tax Calculator Section -->
    <section id="calculator" class="container mx-auto px-4 py-16 section-transition section-hidden">
        <h2 class="text-4xl font-bold mb-4 text-center bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">Tax & Incentive Calculator</h2>
        <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">Calculate potential tax obligations and available incentives for your investment in Uganda's various economic sectors.</p>
        
        <div class="bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl max-w-2xl mx-auto">
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="investmentAmount" class="block text-gray-700 font-semibold mb-3">Investment Amount (USD)</label>
                    <input type="number" id="investmentAmount" placeholder="Enter amount" 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" 
                           aria-required="true">
                </div>
                <div>
                    <label for="sector" class="block text-gray-700 font-semibold mb-3">Investment Sector</label>
                    <select id="sector" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" aria-label="Select sector">
                        <option value="agriculture">Agriculture & Agribusiness</option>
                        <option value="technology">Technology & Innovation</option>
                        <option value="tourism">Tourism & Hospitality</option>
                        <option value="energy">Energy & Infrastructure</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="healthcare">Healthcare</option>
                    </select>
                </div>
            </div>
            
            <div class="mt-6">
                <label for="investmentType" class="block text-gray-700 font-semibold mb-3">Investment Type</label>
                <select id="investmentType" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all">
                    <option value="new">New Investment</option>
                    <option value="expansion">Business Expansion</option>
                    <option value="acquisition">Acquisition</option>
                </select>
            </div>
            
            <button onclick="calculateTax()" class="btn-primary text-white p-4 rounded-xl w-full font-semibold text-lg mt-8" aria-label="Calculate tax">
                <span id="calculateButtonText">Calculate Tax & Incentives</span>
                <div id="calculateSpinner" class="loading-spinner hidden mx-auto"></div>
            </button>
            
            <div id="result" class="mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl hidden"></div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="container mx-auto px-4 py-16 section-transition section-hidden">
        <h2 class="text-4xl font-bold mb-4 text-center bg-gradient-to-r from-teal-600 to-blue-600 bg-clip-text text-transparent">Get In Touch</h2>
        <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">Ready to explore opportunities in Uganda? Contact our team for personalized assistance and expert guidance on your business journey.</p>
        
        <div class="bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl max-w-2xl mx-auto">
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="contactName" class="block text-gray-700 font-semibold mb-3">Full Name</label>
                    <input type="text" id="contactName" placeholder="Enter your full name" 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" 
                           aria-required="true">
                </div>
                <div>
                    <label for="contactEmail" class="block text-gray-700 font-semibold mb-3">Email Address</label>
                    <input type="email" id="contactEmail" placeholder="Enter your email" 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" 
                           aria-required="true">
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6 mt-6">
                <div>
                    <label for="contactPhone" class="block text-gray-700 font-semibold mb-3">Phone Number</label>
                    <input type="tel" id="contactPhone" placeholder="Enter your phone number" 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all">
                </div>
                <div>
                    <label for="contactSubject" class="block text-gray-700 font-semibold mb-3">Subject</label>
                    <input type="text" id="contactSubject" placeholder="Enter the subject" 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" 
                           aria-required="true">
                </div>
            </div>
            
            <div class="mt-6">
                <label for="contactMessage" class="block text-gray-700 font-semibold mb-3">Message</label>
                <textarea id="contactMessage" placeholder="Tell us about your business interests and how we can help..." 
                          class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" 
                          rows="6" aria-required="true"></textarea>
            </div>
            
            <button onclick="submitContactForm()" class="btn-primary text-white p-4 rounded-xl w-full font-semibold text-lg mt-8" aria-label="Send message">
                <span id="contactButtonText">Send Message</span>
                <div id="contactSpinner" class="loading-spinner hidden mx-auto"></div>
            </button>
            
            <div id="contactResult" class="mt-6"></div>
        </div>
    </section>

    <!-- Email Modal -->
    <div id="emailModal" class="modal-backdrop fixed inset-0 z-50 hidden" aria-labelledby="emailModalTitle" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="modal-content max-w-md w-full p-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="emailModalTitle" class="text-2xl font-bold text-gray-900">Send Email</h3>
                    <button onclick="closeEmailModal()" class="text-gray-400 hover:text-gray-600 text-3xl font-bold transition-colors" aria-label="Close modal">&times;</button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label for="modalOrganization" class="block text-sm font-semibold text-gray-700 mb-2">Organization</label>
                        <input type="text" id="modalOrganization" readonly class="w-full p-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-700" aria-readonly="true">
                    </div>
                    <div>
                        <label for="modalSenderName" class="block text-sm font-semibold text-gray-700 mb-2">Your Name</label>
                        <input type="text" id="modalSenderName" placeholder="Enter your full name" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" aria-required="true">
                    </div>
                    <div>
                        <label for="modalSenderEmail" class="block text-sm font-semibold text-gray-700 mb-2">Your Email</label>
                        <input type="email" id="modalSenderEmail" placeholder="your.email@example.com" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" aria-required="true">
                    </div>
                    <div>
                        <label for="modalSubject" class="block text-sm font-semibold text-gray-700 mb-2">Subject</label>
                        <input type="text" id="modalSubject" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all" aria-required="true">
                    </div>
                    <div>
                        <label for="modalMessage" class="block text-sm font-semibold text-gray-700 mb-2">Message</label>
                        <textarea id="modalMessage" rows="5" placeholder="Dear Team,&#10;&#10;I am writing to inquire about..." class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none transition-all resize-none" aria-required="true"></textarea>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-8">
                    <button onclick="sendEmail()" class="flex-1 btn-secondary text-white py-3 px-4 rounded-xl font-semibold transition-all" aria-label="Send email">Send Email</button>
                    <button onclick="closeEmailModal()" class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-semibold" aria-label="Cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-indigo-900 via-purple-900 to-indigo-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="h-10 w-10 bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg flex items-center justify-center">
                            <span class="text-lg font-bold">O</span>
                        </div>
                        <h3 class="text-xl font-bold">Ontester</h3>
                    </div>
                    <p class="text-gray-300">Your gateway to Uganda's business opportunities and government services.</p>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#services" class="text-gray-300 hover:text-orange-300 transition-colors">Services</a></li>
                        <li><a href="#investments" class="text-gray-300 hover:text-orange-300 transition-colors">Investments</a></li>
                        <li><a href="#calculator" class="text-gray-300 hover:text-orange-300 transition-colors">Calculator</a></li>
                        <li><a href="#contact" class="text-gray-300 hover:text-orange-300 transition-colors">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Contact Info</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li> info@ontester.ug</li>
                        <li> +256 700 000 000</li>
                        <li> Kampala, Uganda</li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="https://twitter.com" target="_blank" class="text-gray-300 hover:text-orange-300 transition-colors" aria-label="Twitter">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                            </svg>
                        </a>
                        <a href="https://linkedin.com" target="_blank" class="text-gray-300 hover:text-orange-300 transition-colors" aria-label="LinkedIn">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"/>
                            </svg>
                        </a>
                        <a href="https://facebook.com" target="_blank" class="text-gray-300 hover:text-orange-300 transition-colors" aria-label="Facebook">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-300">&copy; 2025 Ontester Uganda Directory. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top fixed bottom-6 right-6 w-14 h-14 text-white font-bold text-xl shadow-lg hidden z-50" onclick="scrollToTop()" aria-label="Back to top">
        <svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd"/>
        </svg>
    </button>

    <script>
        // Enhanced JavaScript with improved functionality
        
        // Debounce utility
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Enhanced Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.card, section > div').forEach(el => {
                observer.observe(el);
            });
        });

        // Enhanced section toggle with smooth transitions
        function toggleSection(sectionId) {
            const sections = ['services', 'investments', 'calculator', 'contact'];
            
            sections.forEach(id => {
                const section = document.getElementById(id);
                if (id === sectionId) {
                    section.classList.remove('section-hidden');
                    section.classList.add('section-visible');
                    setTimeout(() => {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                } else {
                    section.classList.remove('section-visible');
                    section.classList.add('section-hidden');
                }
            });
        }

        // Enhanced back to top with smooth scroll
        const backToTopButton = document.getElementById('backToTop');
        let ticking = false;

        function updateBackToTop() {
            const scrolled = window.scrollY;
            const threshold = 300;
            
            if (scrolled > threshold) {
                backToTopButton.style.display = 'flex';
                backToTopButton.style.opacity = Math.min((scrolled - threshold) / 200, 1);
            } else {
                backToTopButton.style.display = 'none';
            }
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(updateBackToTop);
                ticking = true;
            }
        });

        function scrollToTop() {
            window.scrollTo({ 
                top: 0, 
                behavior: 'smooth' 
            });
        }

        // Enhanced listings data with better structure
        const listingsData = [
            {
                title: 'ICT Policy & Digital Transformation',
                keywords: ['ict policy', 'digital transformation', 'e-services', 'infrastructure', 'kampala', 'ai integration', 'cloud-first', 'cybersecurity', 'zero-trust'],
                section: 'services',
                website: 'https://www.nita.go.ug',
                location: 'kampala',
                category: 'technology'
            },
            {
                title: 'Telecom & Broadcasting Regulation',
                keywords: ['telecom', 'broadcasting', 'regulation', 'licenses', 'bugolobi', '5g', '6g', 'network slicing', 'satellite internet', 'streaming'],
                section: 'services',
                website: 'https://www.ucc.co.ug',
                location: 'bugolobi',
                category: 'technology'
            },
            {
                title: 'Public Broadcasting',
                keywords: ['public broadcasting', 'radio', 'tv', 'media', 'kampala', 'podcasts', 'on-demand', 'interactive', 'community-driven'],
                section: 'services',
                website: 'https://www.ubc.go.ug',
                location: 'kampala',
                category: 'media'
            },
            {
                title: 'Tax Collection',
                keywords: ['tax collection', 'corporate tax', 'vat', 'customs', 'kampala', 'ai fraud detection', 'blockchain', 'digital taxation', 'cryptocurrency'],
                section: 'services',
                website: 'https://www.ura.go.ug',
                location: 'nakawa',
                category: 'finance'
            },
            {
                title: 'Business Registration',
                keywords: ['business registration', 'trademark', 'patent', 'kololo', 'blockchain registries', 'ai name checks', 'smart contracts', 'digital identity'],
                section: 'services',
                website: 'https://www.ursb.go.ug',
                location: 'kololo',
                category: 'legal'
            },
            {
                title: 'Standards & Quality Assurance',
                keywords: ['standards', 'quality assurance', 'export compliance', 'bweyogerere', 'iot sensors', 'digital twin', 'blockchain traceability', 'sustainability'],
                section: 'services',
                website: 'https://www.unbs.go.ug',
                location: 'bweyogerere',
                category: 'quality'
            },
            {
                title: 'Investment Facilitation',
                keywords: ['investment facilitation', 'licensing', 'sme', 'kololo', 'esg compliance', 'green investments', 'digital platforms', 'ai market analysis'],
                section: 'investments',
                website: 'https://www.ugandainvest.go.ug',
                location: 'kololo',
                category: 'investment'
            },
            {
                title: 'Capital Markets Regulation',
                keywords: ['capital markets', 'securities', 'brokers', 'kampala'],
                section: 'investments',
                website: 'https://www.cmauganda.co.ug',
                location: 'kampala',
                category: 'finance'
            },
            {
                title: 'Renewable Energy Finance',
                keywords: ['renewable energy', 'finance', 'guarantees', 'kampala'],
                section: 'investments',
                website: 'https://www.ueccc.or.ug',
                location: 'kampala',
                category: 'energy'
            }
        ];

        // Enhanced search functionality
        const debouncedShowSuggestions = debounce(showSuggestions, 300);

        function showSuggestions() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase().trim();
            const suggestionsDiv = document.getElementById('searchSuggestions');
            
            if (searchInput.length < 2) {
                suggestionsDiv.classList.add('hidden');
                return;
            }

            showLoadingState(suggestionsDiv);
            suggestionsDiv.classList.remove('hidden');

            setTimeout(() => {
                const matches = findMatches(searchInput);
                displaySuggestions(matches, suggestionsDiv);
            }, 100);
        }

        function findMatches(query) {
            return listingsData.filter(item => {
                const titleMatch = item.title.toLowerCase().includes(query);
                const keywordMatch = item.keywords && item.keywords.some(keyword => 
                    keyword.toLowerCase().includes(query)
                );
                const locationMatch = item.location.toLowerCase().includes(query);
                const categoryMatch = item.category && item.category.toLowerCase().includes(query);
                
                return titleMatch || keywordMatch || locationMatch || categoryMatch;
            }).slice(0, 8); // Limit to 8 suggestions
        }

        function showLoadingState(container) {
            container.innerHTML = `
                <div class="p-4 flex items-center justify-center">
                    <div class="loading-spinner mr-3"></div>
                    <span class="text-gray-500">Searching...</span>
                </div>
            `;
        }

        function displaySuggestions(matches, container) {
            container.innerHTML = '';
            
            if (matches.length > 0) {
                matches.forEach((match, index) => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item p-4 cursor-pointer border-b border-gray-100 last:border-b-0';
                    div.innerHTML = `
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-semibold text-gray-900">${match.title}</div>
                                <div class="text-sm text-gray-500">
                                    ${match.section === 'services' ? 'Government Service' : 'Investment Service'}  ${capitalize(match.location)}
                                </div>
                            </div>
                            <div class="text-xs bg-gray-100 px-2 py-1 rounded-full">
                                ${capitalize(match.category || match.section)}
                            </div>
                        </div>
                    `;
                    div.setAttribute('tabindex', '0');
                    div.setAttribute('role', 'option');
                    div.onclick = () => selectSuggestion(match);
                    div.onkeydown = (e) => {
                        if (e.key === 'Enter') selectSuggestion(match);
                    };
                    container.appendChild(div);
                });
            } else {
                container.innerHTML = `
                    <div class="p-4 text-gray-500 text-center">
                        <svg class="w-8 h-8 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 20a7.962 7.962 0 01-6-2.709M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"/>
                        </svg>
                        No results found
                    </div>
                `;
            }
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function selectSuggestion(item) {
            document.getElementById('searchSuggestions').classList.add('hidden');
            document.getElementById('searchInput').value = item.title;
            searchDirectory(item.title);
        }

        function handleSearchKeydown(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                searchDirectory();
            }
        }

        // Enhanced search directory function
        function searchDirectory(searchTerm = null) {
            const query = (searchTerm || document.getElementById('searchInput').value).toLowerCase().trim();
            const suggestionsDiv = document.getElementById('searchSuggestions');
            const searchButton = document.getElementById('searchButtonText');
            const searchSpinner = document.getElementById('searchSpinner');
            
            suggestionsDiv.classList.add('hidden');
            
            if (!query) {
                showNotification('Please enter a search term', 'error');
                return;
            }

            // Show loading state
            searchButton.classList.add('hidden');
            searchSpinner.classList.remove('hidden');

            setTimeout(() => {
                const allCards = document.querySelectorAll('.card');
                let found = false;
                let matchedCard = null;

                // Reset all cards first
                allCards.forEach(card => {
                    card.classList.remove('card-highlight');
                    card.style.display = 'block';
                });

                // Find matches and highlight them
                allCards.forEach(card => {
                    const title = card.getAttribute('data-title')?.toLowerCase() || '';
                    const keywords = card.getAttribute('data-keywords')?.toLowerCase() || '';
                    const location = card.getAttribute('data-location')?.toLowerCase() || '';
                    
                    if (title.includes(query) || keywords.includes(query) || location.includes(query)) {
                        card.classList.add('card-highlight');
                        if (!matchedCard) matchedCard = card;
                        found = true;
                    }
                });

                // Show appropriate section and scroll to first match
                if (found && matchedCard) {
                    const isInServices = matchedCard.closest('#servicesList');
                    const isInInvestments = matchedCard.closest('#investmentsList');
                    
                    if (isInServices) {
                        toggleSection('services');
                    } else if (isInInvestments) {
                        toggleSection('investments');
                    }
                    
                    setTimeout(() => {
                        matchedCard.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 500);
                    
                    showNotification(`Found ${document.querySelectorAll('.card-highlight').length} result(s) - highlighted in orange`, 'success');
                } else {
                    // If no matches found, still show all sections without hiding anything
                    toggleSection('services');
                    showNotification('No matching services found - showing all services', 'warning');
                }

                // Reset loading state
                searchButton.classList.remove('hidden');
                searchSpinner.classList.add('hidden');
            }, 800);
        }

        // Add a clear search function
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            const allCards = document.querySelectorAll('.card');
            allCards.forEach(card => {
                card.classList.remove('card-highlight');
                card.style.display = 'block';
            });
            showNotification('Search cleared', 'success');
        }

        // Enhanced filter functionality
        function filterListings() {
            const category = document.getElementById('categoryFilter').value;
            const location = document.getElementById('locationFilter').value;
            const servicesSection = document.getElementById('services');
            const investmentsSection = document.getElementById('investments');
            const allCards = document.querySelectorAll('.card');

            let visibleCount = 0;

            allCards.forEach(card => {
                const cardLocation = card.getAttribute('data-location')?.toLowerCase();
                const isService = card.closest('#servicesList');
                const isInvestment = card.closest('#investmentsList');
                let show = true;

                // Category filter
                if (category !== 'all') {
                    if (category === 'services' && !isService) show = false;
                    if (category === 'investments' && !isInvestment) show = false;
                }

                // Location filter
                if (location !== 'all' && cardLocation !== location) {
                    show = false;
                }

                card.style.display = show ? 'block' : 'none';
                if (show) visibleCount++;
            });

            // Show/hide sections
            servicesSection.classList.remove('section-hidden');
            servicesSection.classList.add('section-visible');
            investmentsSection.classList.remove('section-hidden');
            investmentsSection.classList.add('section-visible');

            if (category === 'services') {
                investmentsSection.classList.remove('section-visible');
                investmentsSection.classList.add('section-hidden');
            } else if (category === 'investments') {
                servicesSection.classList.remove('section-visible');
                servicesSection.classList.add('section-hidden');
            }

            showNotification(`Showing ${visibleCount} result(s)`, 'success');
        }

        function clearFilters() {
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('locationFilter').value = 'all';
            document.getElementById('searchInput').value = '';
            
            const allCards = document.querySelectorAll('.card');
            allCards.forEach(card => {
                card.style.display = 'block';
                card.classList.remove('card-highlight');
            });
            
            // Show all sections
            document.getElementById('services').classList.remove('section-hidden');
            document.getElementById('services').classList.add('section-visible');
            document.getElementById('investments').classList.remove('section-hidden');
            document.getElementById('investments').classList.add('section-visible');
            
            showNotification('Filters cleared', 'success');
        }

        // Enhanced email modal functionality
        let currentEmailData = {};

        function openEmailModal(organization, email, defaultSubject) {
            currentEmailData = { organization, email, defaultSubject };
            
            document.getElementById('modalOrganization').value = organization;
            document.getElementById('modalSubject').value = defaultSubject;
            document.getElementById('modalMessage').value = 
                `Dear ${organization} Team,\n\nI am writing to inquire about your services and would appreciate more information about your offerings.\n\nI am particularly interested in learning more about your processes, requirements, and how you can assist with my business needs.\n\nThank you for your time and assistance.\n\nBest regards,`;
            
            const modal = document.getElementById('emailModal');
            const modalContent = modal.querySelector('.modal-content');
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            setTimeout(() => {
                modalContent.classList.add('active');
            }, 10);
            
            // Clear previous values
            document.getElementById('modalSenderName').value = '';
            document.getElementById('modalSenderEmail').value = '';
            document.getElementById('modalSenderName').focus();
        }

        function closeEmailModal() {
            const modal = document.getElementById('emailModal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function sendEmail() {
            const senderName = document.getElementById('modalSenderName').value.trim();
            const senderEmail = document.getElementById('modalSenderEmail').value.trim();
            const subject = document.getElementById('modalSubject').value.trim();
            const message = document.getElementById('modalMessage').value.trim();

            // Enhanced validation
            if (!senderName) {
                showNotification('Please enter your name', 'error');
                document.getElementById('modalSenderName').focus();
                return;
            }
            
            if (!senderEmail || !isValidEmail(senderEmail)) {
                showNotification('Please enter a valid email address', 'error');
                document.getElementById('modalSenderEmail').focus();
                return;
            }
            
            if (!subject) {
                showNotification('Please enter a subject', 'error');
                document.getElementById('modalSubject').focus();
                return;
            }
            
            if (!message) {
                showNotification('Please enter a message', 'error');
                document.getElementById('modalMessage').focus();
                return;
            }

            const emailBody = `From: ${senderName} (${senderEmail})\n\n${message}\n\n---\nSent via Ontester Uganda Directory\nTimestamp: ${new Date().toLocaleString()}`;
            const mailtoLink = `mailto:${currentEmailData.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
            
            window.location.href = mailtoLink;
            showNotification('Email client opened successfully!', 'success');
            
            setTimeout(() => {
                closeEmailModal();
            }, 1500);
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Enhanced tax calculator
        function calculateTax() {
            const amount = parseFloat(document.getElementById('investmentAmount').value);
            const sector = document.getElementById('sector').value;
            const investmentType = document.getElementById('investmentType').value;
            const resultDiv = document.getElementById('result');
            const calculateButton = document.getElementById('calculateButtonText');
            const calculateSpinner = document.getElementById('calculateSpinner');

            if (isNaN(amount) || amount <= 0) {
                resultDiv.innerHTML = '<p class="text-red-500 font-semibold">Please enter a valid investment amount.</p>';
                showNotification('Invalid investment amount', 'error');
                return;
            }

            // Show loading state
            calculateButton.classList.add('hidden');
            calculateSpinner.classList.remove('hidden');

            setTimeout(() => {
                const taxData = {
                    agriculture: { baseTax: 0.10, incentive: 0.05, description: 'Agriculture & Agribusiness' },
                    technology: { baseTax: 0.20, incentive: 0.08, description: 'Technology & Innovation' },
                    tourism: { baseTax: 0.15, incentive: 0.04, description: 'Tourism & Hospitality' },
                    energy: { baseTax: 0.12, incentive: 0.07, description: 'Energy & Infrastructure' },
                    manufacturing: { baseTax: 0.18, incentive: 0.06, description: 'Manufacturing' },
                    healthcare: { baseTax: 0.14, incentive: 0.05, description: 'Healthcare' }
                };

                const typeMultipliers = {
                    new: 1.0,
                    expansion: 0.85,
                    acquisition: 1.1
                };

                const { baseTax, incentive, description } = taxData[sector];
                const typeMultiplier = typeMultipliers[investmentType];
                
                const tax = amount * baseTax * typeMultiplier;
                const incentiveAmount = amount * incentive;
                const netTax = Math.max(0, tax - incentiveAmount);
                const savings = tax - netTax;

                resultDiv.innerHTML = `
                    <div class="space-y-4">
                        <h4 class="text-xl font-bold text-gray-900 mb-4">Tax Calculation Results</h4>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <div class="text-sm text-gray-600">Investment Amount</div>
                                <div class="text-2xl font-bold text-blue-600">${amount.toLocaleString()}</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <div class="text-sm text-gray-600">Sector</div>
                                <div class="text-lg font-semibold text-green-600">${description}</div>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-red-50 p-4 rounded-lg">
                                <div class="text-sm text-gray-600">Base Tax (${(baseTax * 100).toFixed(1)}%)</div>
                                <div class="text-xl font-bold text-red-600">${tax.toLocaleString()}</div>
                            </div>
                            <div class="bg-yellow-50 p-4 rounded-lg">
                                <div class="text-sm text-gray-600">Incentives (${(incentive * 100).toFixed(1)}%)</div>
                                <div class="text-xl font-bold text-yellow-600">-${incentiveAmount.toLocaleString()}</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <div class="text-sm text-gray-600">Net Tax Payable</div>
                                <div class="text-xl font-bold text-green-600">${netTax.toLocaleString()}</div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600">Total Savings from Incentives</div>
                            <div class="text-2xl font-bold text-green-600">${savings.toLocaleString()}</div>
                            <div class="text-sm text-gray-500 mt-1">
                                Investment Type: ${investmentType.charAt(0).toUpperCase() + investmentType.slice(1)} 
                                (${typeMultiplier < 1 ? 'Discounted' : typeMultiplier > 1 ? 'Premium' : 'Standard'} Rate)
                            </div>
                        </div>
                        
                        <div class="text-sm text-gray-500 bg-gray-50 p-3 rounded-lg">
                            <strong>Disclaimer:</strong> This is an estimate for planning purposes. Actual tax obligations may vary based on specific circumstances, timing, and regulatory changes. 
                            Please consult <a href="https://www.ura.go.ug" target="_blank" class="text-blue-500 hover:underline">Uganda Revenue Authority (URA)</a> for precise calculations and official guidance.
                        </div>
                    </div>
                `;
                
                resultDiv.classList.remove('hidden');
                showNotification('Tax calculation completed!', 'success');
                
                // Reset loading state
                calculateButton.classList.remove('hidden');
                calculateSpinner.classList.add('hidden');
            }, 1000);
        }

        // Enhanced contact form
        function submitContactForm() {
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const phone = document.getElementById('contactPhone').value.trim();
            const subject = document.getElementById('contactSubject').value.trim();
            const message = document.getElementById('contactMessage').value.trim();
            const resultDiv = document.getElementById('contactResult');
            const contactButton = document.getElementById('contactButtonText');
            const contactSpinner = document.getElementById('contactSpinner');

            // Enhanced validation
            if (!name) {
                resultDiv.innerHTML = '<p class="text-red-500 font-semibold">Please enter your name.</p>';
                showNotification('Please enter your name', 'error');
                document.getElementById('contactName').focus();
                return;
            }
            
            if (!email || !isValidEmail(email)) {
                resultDiv.innerHTML = '<p class="text-red-500 font-semibold">Please enter a valid email address.</p>';
                showNotification('Please enter a valid email address', 'error');
                document.getElementById('contactEmail').focus();
                return;
            }
            
            if (!subject) {
                resultDiv.innerHTML = '<p class="text-red-500 font-semibold">Please enter a subject.</p>';
                showNotification('Please enter a subject', 'error');
                document.getElementById('contactSubject').focus();
                return;
            }
            
            if (!message) {
                resultDiv.innerHTML = '<p class="text-red-500 font-semibold">Please enter a message.</p>';
                showNotification('Please enter a message', 'error');
                document.getElementById('contactMessage').focus();
                return;
            }

            // Show loading state
            contactButton.classList.add('hidden');
            contactSpinner.classList.remove('hidden');

            setTimeout(() => {
                const emailBody = `
From: ${name} (${email})
Phone: ${phone || 'Not provided'}
Subject: ${subject}

Message:
${message}

---
Sent via Ontester Uganda Directory Contact Form
Timestamp: ${new Date().toLocaleString()}
User Agent: ${navigator.userAgent}
                `.trim();

                const mailtoLink = `mailto:support@ontester.ug?subject=${encodeURIComponent(`Contact Form: ${subject}`)}&body=${encodeURIComponent(emailBody)}`;
                window.location.href = mailtoLink;

                resultDiv.innerHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-green-800 font-semibold">Message sent successfully!</span>
                        </div>
                        <p class="text-green-700 mt-2">Your email client has been opened. We'll get back to you within 24 hours.</p>
                    </div>
                `;
                
                showNotification('Contact form submitted successfully!', 'success');

                // Clear form after successful submission
                document.getElementById('contactName').value = '';
                document.getElementById('contactEmail').value = '';
                document.getElementById('contactPhone').value = '';
                document.getElementById('contactSubject').value = '';
                document.getElementById('contactMessage').value = '';
                
                // Reset loading state
                contactButton.classList.remove('hidden');
                contactSpinner.classList.add('hidden');
            }, 1000);
        }

        // Enhanced notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 right-4 z-50 px-6 py-4 rounded-xl shadow-lg text-white font-medium transform transition-all duration-500 translate-x-full max-w-sm`;
            
            // Set notification style based on type
            switch(type) {
                case 'success':
                    notification.classList.add('bg-gradient-to-r', 'from-green-500', 'to-green-600');
                    notification.innerHTML = `
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            ${message}
                        </div>
                    `;
                    break;
                case 'error':
                    notification.classList.add('bg-gradient-to-r', 'from-red-500', 'to-red-600');
                    notification.innerHTML = `
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                            </svg>
                            ${message}
                        </div>
                    `;
                    break;
                case 'warning':
                    notification.classList.add('bg-gradient-to-r', 'from-yellow-500', 'to-orange-500');
                    notification.innerHTML = `
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            ${message}
                        </div>
                    `;
                    break;
                default:
                    notification.classList.add('bg-gradient-to-r', 'from-blue-500', 'to-blue-600');
                    notification.innerHTML = `
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                            ${message}
                        </div>
                    `;
            }
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Auto-hide after delay
            const hideDelay = type === 'error' ? 5000 : 3000;
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, hideDelay);
        }

        // Download guide functionality
        function downloadGuide(organization) {
            showNotification(`Downloading ${organization} guide...`, 'info');
            
            // Simulate download with timeout
            setTimeout(() => {
                showNotification(`${organization} guide download complete!`, 'success');
            }, 1500);
        }

        // Enhanced event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize tooltips and accessibility features
            initializeAccessibility();
            
            // Set up keyboard navigation
            setupKeyboardNavigation();
            
            // Initialize performance monitoring
            setupPerformanceMonitoring();
        });

        function initializeAccessibility() {
            // Add focus management for modals
            const modal = document.getElementById('emailModal');
            modal.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    trapFocus(e, modal);
                }
            });
        }

        function trapFocus(e, container) {
            const focusableElements = container.querySelectorAll(
                'a[href], button, textarea, input[type="text"], input[type="email"], input[type="tel"], select'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];

            if (e.shiftKey && document.activeElement === firstElement) {
                lastElement.focus();
                e.preventDefault();
            } else if (!e.shiftKey && document.activeElement === lastElement) {
                firstElement.focus();
                e.preventDefault();
            }
        }

        function setupKeyboardNavigation() {
            // Add keyboard navigation for cards
            document.querySelectorAll('.card').forEach(card => {
                card.setAttribute('tabindex', '0');
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        const emailButton = card.querySelector('button[onclick*="openEmailModal"]');
                        if (emailButton) emailButton.click();
                    }
                });
            });
        }

        function setupPerformanceMonitoring() {
            // Monitor page load performance
            window.addEventListener('load', () => {
                if ('performance' in window) {
                    const perfData = performance.timing;
                    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                    console.log(`Page loaded in ${pageLoadTime}ms`);
                }
            });
        }

        // Close modal when clicking outside
        document.getElementById('emailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEmailModal();
            }
        });

        // Global keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Escape key handling
            if (e.key === 'Escape') {
                const modal = document.getElementById('emailModal');
                if (!modal.classList.contains('hidden')) {
                    closeEmailModal();
                }
                
                // Close suggestions
                document.getElementById('searchSuggestions').classList.add('hidden');
            }
            
            // Search shortcut (Ctrl/Cmd + K)
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Show services section by default
            toggleSection('services');
            
            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        const sectionId = this.getAttribute('href').substring(1);
                        toggleSection(sectionId);
                    }
                });
            });
            
            // Initialize intersection observer for cards
            const cardObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.animationDelay = `${index * 100}ms`;
                            entry.target.classList.add('animate-fade-in');
                        }, index * 100);
                        cardObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.card').forEach(card => {
                cardObserver.observe(card);
            });
        });

        // Service Worker registration for offline functionality (optional)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
